<launch>
  <node pkg="image_publisher" type="image_publisher" name="image_publisher"
        args="$(find rviz)/images/splash.png" >
    <param name="flip_horizontal" value="false" />
    <param name="flip_vertical" value="false" />
    <param name="frame_id" value="/camera/image" />
    <param name="publish_rate" value="1" />
    <param name="camera_info_url" value="package://turtlebot3_autorace_camera/calibration/intrinsic_calibration/camerav2_320x240_30fps.yaml" />   <!-- relative to ~/.ros/ -->
  </node>

  <group>
    <!-- image transport from compressed to raw -->
    <node pkg="image_transport" type="republish" name="republish" args="compressed">
      <remap from="in"  to="camera/rgb/image_raw" />
      <remap from="out"   to="camera/image"/>
    </node>
    <node pkg="topic_tools" type="relay" name="relay_camera_info" args="/camera/rgb/camera_info /camera/camera_info"/>
  </group>

  <!-- image rectification -->
  <node ns="camera" pkg="image_proc" type="image_proc" name="image_proc" args="_approximate_sync:=true" output="screen">
    <remap from="image_raw" to="image" />
    <param name="queue_size" value="20" />
  </node>
</launch>
